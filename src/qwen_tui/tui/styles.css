/* Qwen-TUI Styles */

/* Permission Dialog Styles */
#permission-dialog {
    align: center middle;
    width: 80%;
    max-width: 60;
    height: auto;
    max-height: 80%;
    background: $surface;
    border: thick $primary;
    padding: 1;
}

#dialog-header {
    height: 3;
    width: 100%;
    layout: horizontal;
    align: center middle;
    margin-bottom: 1;
}

#dialog-title {
    content-align: center middle;
    text-style: bold;
    width: 1fr;
}

#dialog-content {
    height: 1fr;
    width: 100%;
    margin-bottom: 1;
}

#dialog-footer {
    height: 3;
    width: 100%;
    layout: horizontal;
    align: center middle;
}

#dialog-footer Button {
    margin: 0 1;
    min-width: 12;
}

/* Risk level indicators */
.risk-safe {
    color: $success;
    text-style: bold;
}

.risk-low {
    color: $warning;
    text-style: bold;
}

.risk-medium {
    color: $warning;
    text-style: bold;
}

.risk-high {
    color: $error;
    text-style: bold;
}

.risk-critical {
    color: $error;
    text-style: bold reverse;
}

/* Details section */
.details-content {
    height: auto;
    width: 100%;
    padding: 1;
    border: solid $secondary;
    margin-top: 1;
}

.details-content.hidden {
    display: none;
}

/* Always allow dialog */
#always-dialog {
    align: center middle;
    width: 60%;
    max-width: 40;
    height: auto;
    background: $surface;
    border: thick $primary;
    padding: 2;
}

#always-title {
    content-align: center middle;
    text-style: bold;
    margin-bottom: 1;
}

#always-message {
    content-align: center middle;
    margin-bottom: 2;
}

#always-buttons {
    height: 3;
    width: 100%;
    layout: horizontal;
    align: center middle;
}

#always-buttons Button {
    margin: 0 1;
    min-width: 10;
}

/* Main container */
#main-container {
    layout: horizontal;
    height: 100%;
}

/* Chat area */
#chat-area {
    width: 70%;
    layout: vertical;
    height: 100%;
}

#chat-scroll {
    height: 1fr;
    min-height: 0;
    padding: 1;
    border: solid $primary;
    overflow-y: auto;
    scrollbar-background: $surface;
    scrollbar-color: $primary;
}

#input-panel {
    height: auto;
    min-height: 3;
    max-height: 5;
    padding: 1;
}

#message-input {
    width: 80%;
}

#send-button {
    width: 20%;
    margin-left: 1;
}

/* Side panels */
#side-panels {
    width: 30%;
    layout: vertical;
}

#backend-panel, #status-panel {
    height: 50%;
    padding: 1;
    border: solid $accent;
    margin: 1;
}

#backend-panel {
}

/* Backend control bar */
#backend-controls {
    layout: horizontal;
    height: 3;
    align: center middle;
    margin-bottom: 1;
}

#backend-controls Select {
    width: 1fr;
    margin-left: 1;
}

#status-panel {
}

/* Panel titles */
.panel-title {
    text-style: bold;
    color: $primary;
    margin-bottom: 1;
}

/* Hidden elements */
.hidden {
    display: none;
}

/* Message styling */
.user-message {
    color: $text;
    margin-bottom: 1;
}

.assistant-message {
    color: $success;
    margin-bottom: 1;
}

.system-message {
    color: $warning;
    text-style: italic;
    margin-bottom: 1;
}

.error-message {
    color: $error;
    text-style: bold;
    margin-bottom: 1;
}

/* Responsive design for small terminals */
.compact-layout #chat-area {
    width: 100%;
}

.compact-layout #side-panels {
    display: none;
}

/* Ensure minimum heights for functionality */
#send-button {
    min-width: 8;
}

/* Compact layout adjustments */
.compact-layout #input-panel {
    height: 3;
    min-height: 3;
}

.compact-layout #chat-scroll {
    height: 1fr;
    min-height: 10;
}

/* Very small screen adjustments */
Screen {
    min-width: 30;
    min-height: 12;
}

/* Extra compact layout for tiny screens */
.ultra-compact #input-panel {
    height: 2;
    min-height: 2;
    padding: 0;
}

.ultra-compact #chat-scroll {
    height: 1fr;
    min-height: 8;
    padding: 0 1;
}

.ultra-compact #message-input {
    width: 65%;
}

.ultra-compact #send-button {
    width: 35%;
    margin-left: 0;
}

/* Footer adjustments for small screens */
Footer {
    height: 1;
    overflow: hidden;
}

/* Model Selector Modal Styles */
#model-selector {
    width: 80%;
    height: 70%;
    background: $surface;
    border: solid $primary;
    margin: 2;
    padding: 1;
    min-width: 50;
    min-height: 15;
}

/* Responsive model selector for small screens */
Screen.compact-layout #model-selector {
    width: 95%;
    height: 85%;
    margin: 1;
    padding: 0;
}

#selector-title {
    dock: top;
    height: 1;
    text-align: center;
    text-style: bold;
    color: $primary;
    margin-bottom: 1;
}

#models-table {
    height: 100%;
    border: solid $accent;
    scrollbar-background: $surface;
    scrollbar-color: $primary;
}

#selector-buttons {
    dock: bottom;
    height: 3;
    margin-top: 1;
    align: center middle;
}

#select-btn {
    margin-right: 2;
}

#cancel-btn {
    margin-left: 2;
}

/* Dark theme adjustments */
Screen {
    background: $surface;
}

Header {
    background: $primary;
    color: $text;
}

Footer {
    background: $primary;
    color: $text;
}

/* Input styling */
Input {
    background: $surface;
    color: $text;
    border: solid $accent;
}

Input:focus {
    border: solid $primary;
}

/* Button styling */
Button {
    background: $primary;
    color: $text;
}

Button:hover {
    background: $accent;
}

Button.-primary {
    background: $success;
    color: $text;
}

Button.-primary:hover {
    background: $warning;
}

/* Thinking and Action Widget Styles */
.thinking-widget {
    background: $surface;
    border-left: solid $warning;
    padding: 0 1;
    margin: 0 0 1 0;
    color: $text;
}

.thinking-widget:hover {
    background: $accent;
}

.action-widget {
    background: $surface;
    border-left: solid $primary;
    padding: 0 1;
    margin: 0 0 1 0;
    color: $text;
}

.action-widget.running {
    border-left: solid $warning;
    background: $surface;
}

.action-widget.completed {
    border-left: solid $success;
    background: $surface;
}

.action-widget.error {
    border-left: solid $error;
    background: $surface;
}

/* Thinking animation styles */
.thinking-widget .spinner {
    color: $warning;
    text-style: bold;
}

.thinking-widget .expanded {
    background: $surface;
    border: solid $accent;
    padding: 1;
    margin: 1 0;
}

/* Action status indicators */
.action-widget .status-running {
    color: $warning;
    text-style: bold;
}

.action-widget .status-completed {
    color: $success;
    text-style: bold;
}

.action-widget .status-error {
    color: $error;
    text-style: bold;
}

.action-widget .parameters {
    color: $text;
    text-style: italic;
    opacity: 0.7;
}

.action-widget .result {
    color: $text;
    margin-top: 1;
    padding-left: 2;
}

/* Permission Dialog Styles */
#permission-dialog {
    width: 80%;
    height: 80%;
    max-width: 80;
    max-height: 25;
    background: $surface;
    border: solid $error;
    padding: 2;
    margin: 2;
    min-width: 60;
    min-height: 20;
}

/* Responsive permission dialog for small screens */
Screen.compact-layout #permission-dialog {
    width: 95%;
    height: 90%;
    margin: 1;
    padding: 1;
    min-width: 50;
}

#dialog-title {
    dock: top;
    height: 1;
    text-align: center;
    text-style: bold;
    color: $error;
    margin-bottom: 1;
}

.risk-indicator {
    text-align: center;
    text-style: bold;
    margin-bottom: 1;
    padding: 1;
    border: round;
}

.risk-safe {
    color: $success;
    border: solid $success;
    background: $surface;
}

.risk-low {
    color: $warning;
    border: solid $warning;
    background: $surface;
}

.risk-medium {
    color: orange;
    border: solid orange;
    background: $surface;
}

.risk-high {
    color: $error;
    border: solid $error;
    background: $surface;
}

.risk-critical {
    color: red;
    border: solid red;
    background: red 10%;
    text-style: bold;
}

.operation-summary {
    background: $surface;
    border: solid $accent;
    padding: 1;
    margin-bottom: 1;
}

.warning-list {
    background: $warning 20%;
    border: solid $warning;
    padding: 1;
    margin-bottom: 1;
    color: $warning;
}

#details-section {
    background: $surface;
    border: solid $accent;
    padding: 1;
    margin-bottom: 1;
    max-height: 8;
}

.section-header {
    text-style: bold;
    color: $primary;
    margin-bottom: 1;
}

.detail-item {
    color: $text;
    margin-left: 2;
}

#dialog-buttons {
    dock: bottom;
    height: 3;
    align: center middle;
    margin-top: 1;
}

#allow-btn {
    margin-right: 1;
    background: $success;
    color: $text;
}

#allow-btn:hover {
    background: $success;
}

#deny-btn {
    margin-right: 1;
    background: $error;
    color: $text;
}

#deny-btn:hover {
    background: $error;
}

#details-btn {
    background: $accent;
    color: $text;
}

#details-btn:hover {
    background: $accent;
}

/* Always Allow Dialog Styles */
#always-allow-dialog {
    width: 60%;
    height: 40%;
    max-width: 60;
    max-height: 15;
    background: $surface;
    border: solid $primary;
    padding: 2;
    margin: 2;
    min-width: 50;
    min-height: 12;
}

#always-title {
    dock: top;
    height: 1;
    text-align: center;
    text-style: bold;
    color: $primary;
    margin-bottom: 1;
}

#always-message {
    text-align: center;
    color: $text;
    margin-bottom: 2;
}

#always-buttons {
    dock: bottom;
    height: 3;
    align: center middle;
}

#yes-btn {
    margin-right: 2;
    background: $success;
    color: $text;
}

#no-btn {
    margin-left: 2;
    background: $accent;
    color: $text;
}